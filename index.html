<!DOCTYPE html>
<html ng-app='store'>
  <head>
    <link rel='stylesheet' type='text/css' href='bootstrap.min.css'>
  </head>
  <body ng-controller='StoreController as storeCtrl'>

    <ul class='list-group'>
      <li class='list-group-item' ng-repeat="product in storeCtrl.products | limitTo:3 | orderBy:'-price'">
        <div ng-hide='product.soldOut'>
          <h3>
            {{ product.name }}
            <em class='pull-right'> {{ product.price | currency }} </em>
          </h3>
          <div class="gallery">
            <img ng-src='{{ product.images.full }}' />
          </div>
          <section ng-controller='PanelController as panelCtrl'>
            <ul class='nav nav-pills'>
              <li ng-class='{ active:panelCtrl.isSelected(1) }'>
                <a href ng-click='panelCtrl.selectTab(1)'>Description</a>
              </li>
              <li ng-class='{ active:panelCtrl.isSelected(2) }'>
                <a href ng-click='panelCtrl.selectTab(2)'>Specifications</a>
              </li>
              <li ng-class='{ active:panelCtrl.isSelected(3) }'>
                <a href ng-click='panelCtrl.selectTab(3)'>Reviews</a>
              </li>
            </ul>
            <div class='panel' ng-show='panelCtrl.isSelected(1)'>
              <h4>Description</h4>
              <p>{{ product.description }}</p>
            </div>
            <div class='panel' ng-show='panelCtrl.isSelected(2)'>
              <h4>Specifications</h4>
              <blockquote>{{ product.specification }}</blockquote>
            </div>
            <div class='panel' ng-show='panelCtrl.isSelected(3)'>
              <h4>Reviews</h4>

              <blockquote ng-repeat='review in product.reviews'>
                <strong>{{ review.stars }} Stars</strong>
                {{ review.body }}
                <br />
                <cite class='clearfix'>-{{ review.author }}</cite>
              </blockquote>

              <form name='reviewForm'>
                <!--Live Review-->
                <blockquote>
                  <strong>{{ review.stars }} Stars</strong>
                  {{ review.body }}
                  <br />
                  <cite class='clearfix'>-{{ review.author }}</cite>
                </blockquote>

                <!--Review Form-->
                <h4>Submit a Review</h4>
                <fieldset class='form-group'>
                  <select class='form-control' title='Stars' ng-model='review.stars' ng-options='stars for stars in [5,4,3,2,1]'>
                    <option value=''>Rate the Product</option>
                  </select>
                </fieldset>

                <fieldset class='form-group'>
                  <textarea class='form-control' placeholder='Write a short review of the product ...' title='Review' ng-model='review.body'></textarea>
                </fieldset>

                <fieldset class='form-group'>
                  <input type='email' class='form-control' placeholder='email@example.com' title='Email' ng-model='review.author' />
                </fieldset>

                <fieldset class='form-group'>
                  <input type='submit' class='btn btn-primary pull-right' value='Submit Review' />
                </fieldset>
              </form>
            </div>
          </section>
          <button ng-show='product.canPurchase'>Add to Cart</button>
        </div>
      </li>
    </ul>

    <script type='text/javascript' src='angular.min.js'></script>
    <script type='text/javascript' src='app.js'></script>
  </body>
</html>
